# v1.2.2：会话列表性能大幅提升

**发布日期**：2026年2月14日

---

## 一句话总结

这次更新让**会话列表加载更快了**，特别是会话很多的时候，速度提升明显。

---

## 新功能：会话列表性能优化

### 这次更新了什么？

优化了 `Session.list()` 的查询性能，现在会在数据库层面进行过滤，而不是加载所有数据后再过滤。

### 会话列表是什么？

OpenCode 会保存所有历史会话。当你在不同的项目目录下运行 `opencode attach` 或查看会话列表时，OpenCode 需要加载这些历史记录。

### 性能提升有多大？

| 会话数量 | 之前 | 现在 |
|----------|------|------|
| 10 个 | 很快 | 很快 |
| 50 个 | 稍慢 | 很快 |
| 100+ 个 | 明显卡顿 | 流畅 |

**简单说**：如果你的会话很多（几十上百个），这次更新会让你感觉"快多了"。

---

## 问题修复：模型变体支持

### 之前的问题

使用 Vercel gateway 或某些提供商时，模型的变体（variant）可能无法正确识别和使用。

### 现在的情况

修复了 Vercel gateway 的变体问题，确保模型选择更准确。

---

## 要不要升级？

| 情况 | 建议 |
|------|------|
| 会话很多，加载有点慢 | ✅ 升级 |
| 使用 Vercel gateway | ✅ 升级 |
| 用得好好的 | 可以等下次 |

**升级命令**：

```bash
opencode upgrade
```

---

## 技术细节（可跳过）

<details>
<summary>点击展开完整更新列表</summary>

### Core（核心）

- 添加 Session.list() 过滤器的全面测试覆盖
- 在数据库级别过滤会话，提高会话列表加载性能
- 修复 Vercel gateway 变体
- 升级 Vertex AI 包

</details>

---

[← 返回更新日志](./index.md)
